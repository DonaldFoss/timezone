#!/bin/bash

while read line
do
  array=($line)
  utc=$(echo ${array[2]} | tr T ' ')
  if [ "${utc%%-*}" -lt 1902 ]; then continue; fi
  # Date cannot do zone shifts with to the second accuracy.
  before=$(TZ=${array[0]} date -d 'TZ="UTC" -1 minute '"$utc" +"%::z/%Z")
  after=$(TZ=${array[0]} date -d 'TZ="UTC" +1 minute '"$utc" +"%::z/%Z")
  if [ "$before" != "${array[3]}" ]
  then
    echo "before: $before $line"
  fi
  if [ "$after" != "${array[4]}" ]
  then
    echo "after:  $after $line"
  fi
done < $1
